<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./estilo.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.min.js"></script>
    <style>
    

    .container2 {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .signature-pad {
            width: 300px;
            height: 150px;
        background-color: rgb(182, 182, 182);
            margin-bottom: 10px;
        }
        .date-box {
            border-radius: 0px;
    font-family: Arial, sans-serif;
}

.date-box label {
    font-weight: bold;
}

#date-input {
    padding: 5px;
    border: 0px solid #ccc;
    border-radius: 4px;
    text-align: center;
    color: red;
}
.input-box label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            text-align: center
            ;
        }

        .input-box input {
            width: 100%;
            padding: 8px;
            border: 0px solid #ccc;
            text-align: center;
        }
        

        .concluciones {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100%; /* 100% of the viewport height */
            width: 100%; /* 100% of the viewport width */
            margin: 0;
            padding: 20px;
            
        }

        .concluciones label {
            font-size: 18px;
            margin-bottom: 10px;
            color: #333;
        }

        .concluciones textarea {
            width: 100%;
            max-width: 600px; /* Set a maximum width */
            height: 750px; /* Set a fixed height */
            padding: 10px;
            font-size: 16px;
            border: 0px solid #ccc;
            border-radius: 5px;
            box-sizing: border-box;
            resize: none; /* Disable resizing */
        }
    </style>
    <title>Conclucion</title>

</head>

<body>


    
    <div id="survey-container">
      <div class="page">
        <img src="./cabezera.png" alt="" width="100%" height="18%">
    <div id="informacion-text">
    
    
        <table class="mi-tabla">
            <tr>
                <td><h4>Concluciones</h4></td>
            </tr>
            <tr>
                <!-- Esta fila está vacía pero será abarcada por la celda de arriba -->
            </tr>
            <td>
               
                <div class="concluciones">
                    <label for="comment-box">Ingrese su comentario:</label>
                    <textarea id="comment-box" name="comment-box" placeholder="Escriba su comentario aquí..." maxlength="3322"></textarea>
                </div>
        
                <!-- Campo para el Registro STPS -->
               
            </td>
            <td>
            </td>
            </table>
        
    
      
    
    </div></div>

<div class="page">
    <img src="./cabezera.png" alt="" width="100%" height="18%">
<div id="informacion-text">


    <table class="mi-tabla">
        <tr>
            <td rowspan="2"><h2>Datos del evaluador</h2></td>
        </tr>
        <tr>
            <!-- Esta fila está vacía pero será abarcada por la celda de arriba -->
        </tr>
        <td>
            
            <div class="input-box">
                <label for="name-input">Nombre:</label>
                <input type="text" id="name-input" name="name-input" placeholder="Ingrese su nombre">
            </div>
    
            <!-- Campo para el Registro STPS -->
            <div class="input-box">
                <label for="stps-input">Registro STPS:</label>
                <input type="text" id="stps-input" name="stps-input" placeholder="Ingrese su Registro STPS">
            </div>
        </td>
        <td>
        </td>
        </table>
        <table class="mi-tabla">
            <tr>
                <td rowspan="2"><h2></h2></td>
            </tr>
            <tr>
                
            </tr>
            <td>
                <button id="selectButton" class="selectButton" onclick="mostrarImagen(this, 'fileInput46', 'preview46')">Capture la imagen de su cedula</button>
                <input type="file" id="fileInput46" accept="image/*" style="display: none;">
                <img id="preview46" alt="Vista previa de la imagen 46" height="250px" width="250px">
            </td>
            <td>
                <button id="selectButton" class="selectButton" onclick="mostrarImagen(this, 'fileInput45', 'preview45')">Capture la imagen de su cedula</button>
                <input type="file" id="fileInput45" accept="image/*" style="display: none;">
                <img id="preview45" alt="Vista previa de la imagen 45" height="250px" width="250px">
            </td>
            <tr>
              <td colspan="2"><div class="container2">
                <h2>Firma aquí 1:</h2>
                <canvas id="signature-pad-1" class="signature-pad"></canvas>
            </div></td>
            </tr>
            </table>

  

</div></div>
<div class="page">
  <img src="./cabezera.png" alt="" width="100%" height="18%">
<div id="informacion-text">


  <table class="mi-tabla">
      <tr>
          <td rowspan="2"><h2>Reviso y aprovo:</h2></td>
      </tr>
      <tr>
          <!-- Esta fila está vacía pero será abarcada por la celda de arriba -->
      </tr>
      <td>
          
          <div class="input-box">
              <label for="name-input">Nombre:</label>
              <input type="text" id="name-input" name="name-input" placeholder="Ingrese su nombre">
          </div>
  
          <!-- Campo para el Registro STPS -->
          <div class="input-box">
              <label for="stps-input">Registro STPS:</label>
              <input type="text" id="stps-input" name="stps-input" placeholder="Ingrese su Registro STPS">
          </div>
      </td>
      <td>
      </td>
      </table>
      <table class="mi-tabla">
          <tr>
              <td rowspan="2"><h2></h2></td>
          </tr>
          <tr>
              
          </tr>
          <td>
              <button id="selectButton" class="selectButton" onclick="mostrarImagen(this, 'fileInput47', 'preview47')">Capture la imagen de su cedula</button>
              <input type="file" id="fileInput47" accept="image/*" style="display: none;">
              <img id="preview47" alt="Vista previa de la imagen 47" height="250px" width="250px">
          </td>
          <td>
              <button id="selectButton" class="selectButton" onclick="mostrarImagen(this, 'fileInput48', 'preview48')">Capture la imagen de su cedula</button>
              <input type="file" id="fileInput48" accept="image/*" style="display: none;">
              <img id="preview48" alt="Vista previa de la imagen 48" height="250px" width="250px">
          </td>
          <tr>
            <td colspan="2"> <div class="container2">
              <h2>Firma aquí 2:</h2>
              <canvas id="signature-pad-2" class="signature-pad"></canvas>
          </div></td>
          </tr>
          </table>

          <button id="download">Descargar PDF</button>


</div></div>

</div>


    


<script>
    function mostrarImagen(button, inputId, previewId) {
        var input = document.getElementById(inputId);
        var preview = document.getElementById(previewId);
    
        input.onchange = function () {
            if (input.files && input.files[0]) {
                var reader = new FileReader();
    
                reader.onload = function (e) {
                    preview.src = e.target.result;
                    button.style.display = 'none'; // Ocultar el botón específico después de seleccionar la imagen
                };
    
                reader.readAsDataURL(input.files[0]);
            }
        };
    
        input.click(); // Simular clic en el input file
    }
    </script>
  <script>
    function initSignaturePad(canvasId) {
        const canvas = document.getElementById(canvasId);
        const ctx = canvas.getContext('2d');
        let drawing = false;

        canvas.addEventListener('mousedown', (e) => {
            drawing = true;
            ctx.beginPath();
            ctx.moveTo(e.offsetX, e.offsetY);
        });

        canvas.addEventListener('mousemove', (e) => {
            if (drawing) {
                ctx.lineTo(e.offsetX, e.offsetY);
                ctx.stroke();
            }
        });

        canvas.addEventListener('mouseup', () => {
            drawing = false;
            ctx.closePath();
        });

        canvas.addEventListener('mouseout', () => {
            drawing = false;
            ctx.closePath();
        });
    }

    // Inicializa ambos pads de firma
    initSignaturePad('signature-pad-1');
    initSignaturePad('signature-pad-2');
</script>
<script>
    document.getElementById('download').addEventListener('click', function() {
        var element = document.body;
        var downloadButton = document.getElementById('download');
        

        // Ocultar los botones antes de generar el PDF
        downloadButton.style.display = 'none';
       

        // Solicitar el nombre del archivo al usuario
        var fileName = prompt("Por favor, ingrese el nombre del archivo:", "mi-pdf");

        // Verificar si el usuario ha ingresado un nombre
        if (fileName) {
            // Configuración del tamaño del PDF y márgenes negativos
            var options = {
                margin: [-4.3, -4.3, -4.3, -4.3], // márgenes negativos en milímetros (top, right, bottom, left)
                filename: fileName + '.pdf', // Nombre del archivo ingresado por el usuario
                image: { type: 'jpeg', quality: 0.98 },
                html2canvas: { scale: 2 }, // Ajustar la escala para mejorar la calidad de imagen
                jsPDF: { unit: 'mm', format: [215.9, 305.1], orientation: 'portrait' } // Tamaño en mm
            };

            html2pdf().from(element).set(options).save().then(() => {
                // Mostrar los botones después de que se haya generado el PDF
                downloadButton.style.display = 'block';
                calculateButton.style.display = 'block';
            });
        } else {
            alert("Debe ingresar un nombre para el archivo.");
            // Mostrar los botones si no se ingresó un nombre
            downloadButton.style.display = 'block';
            calculateButton.style.display = 'block';
        }
    });
</script>
<script>
    document.getElementById('download').addEventListener('click', function() {
        // Aquí puedes añadir la lógica para descargar el PDF
        // ...

        // Luego, enviar un mensaje al script principal para cambiar a la siguiente página después de 10 segundos
        window.parent.postMessage('nextPage', '*');
    });
</script>

<script src="./hoja.js"></script>
<script src="./funcion.js"></script>
<script src="./prueba.js"></script>



</body>
</html>